{
  "id": 0,
  "name": "program",
  "data_db_conn": "host=141.223.197.33 port=54320 user=pse password=pse dbname=pse",
  "log_db_conn": "host=141.223.197.33 port=54320 user=pse password=pse dbname=pse",
  "queue": "real_queue",
  "ops": [{
    "id": 1,
    "name": "OpenURL",
    "label": 1,
    "url": "https://www.amazon.de/s?k=poc+helmet&rh=p_89%3APOC&dc&language=en_GB&qid=1581570991&rnid=669059031&ref=sr_nr_p_89_1",
    "zipcode_url": "https://www.amazon.de/gp/delivery/ajax/address-change.html?locationType=LOCATION_INPUT&zipCode=60598",
    "ops": [{
      "id": 2,
      "name": "Expander"
    }]
  },{
    "id": 3,
    "name": "BFSIterator",
    "label": 2,
    "input": 2,
    "url_query": "&page=%d",
    "delay": 5,
    "initial_values": [1],
    "increments": [1],
    "max_num_tasks": 2,
    "query": "//div[@class='s-expand-height s-include-content-margin s-border-bottom s-latency-cf-section']",
    "ops": [{
      "id": 4,
      "name": "Expander",
      "type": 1,
      "query": "//span[@class='rush-component s-latency-cf-section']//div[@class='s-result-list s-search-results sg-row']//a[@class='a-link-normal a-text-normal']",
      "attr": "href",
      "site":""
    }]
  },{
    "id": 7,
    "name": "BFSIterator",
    "label": 3,
    "max_num_tasks": -1,
    "delay": 10,
    "query": "//span[@id='productTitle']",
    "input": 4,
    "ops": [{
       "id": 10,
       "name": "Expander",
       "type": 1,
       "query": "//ul//li[contains(@id, 'color_name')]",
       "attr": "data-dp-url",
       "cur_url": 1,
       "site": "https://www.amazon.de"
     }]
  },{
    "id": 11,
    "name": "BFSIterator",
    "label": 5,
    "max_num_tasks": -1,
    "delay": 5,
    "query": "//span[@id='productTitle']",
    "input": 10,
    "ops": [{
       "id": 12,
       "name": "ValuesScrapper",
       "queries": [{
         "key": "name",
         "query": "//span[@id='productTitle']",
         "attr": "alltext",
         "essential": true
       },{
         "key": "url",
         "query": "",
         "attr": "url"
       },{
         "key": "brand",
         "query": "//a[@id='bylineInfo']",
         "attr": "alltext"
       },{
         "key": "description",
         "query": "//div[@id='featurebullets_feature_div']",
         "attr": "outerHTML"
       },{
         "key": "rating",
         "query": "//div[@id='averageCustomerReviews_feature_div']//span[@id='acrPopover']",
         "attr": "title"
       },{
         "key": "information",
         "query": "//div[@id='productDetails_feature_div']",
         "attr": "outerHTML"
       },{
         "key": "asin",
         "query": "//div[@id='averageCustomerReviews_feature_div']//div[@id='averageCustomerReviews']",
         "attr": "data-asin"
       },{
         "key": "front_image",
         "query": "//img[@id='landingImage']",
         "attr": "src"
       },{
         "key": "zipcode",
         "query": "//span[@id='glow-ingress-line2'][contains(text(),'60598')]",
         "attr": "alltext",
         "essential": true
       },{
         "key": "one_size",
         "query": "//div[@id='variation_size_name']//span[@class='selection'] | //span[@id='dropdown_selected_size_name']//span[@class='a-dropdown-prompt']",
         "attr": "alltext"
       },{
         "key": "one_color",
         "query": "//div[@id='variation_color_name']//span[@class='selection']",
         "attr": "alltext"
       },{
         "key": "one_price",
         "query": "//span[contains(@id,'priceblock_')] | //div[contains(@id,'olp-upd-new')]//span[@class='a-color-price']",
         "attr": "alltext"
       },{
         "key": "one_information",
         "query": "//div[@id='productDetails_feature_div']",
         "attr": "alltext"
       },{
         "key": "one_stock",
         "query": "//select[@id='quantity']/option[last()]",
         "attr": "alltext"
       },{
         "key": "one_new_seller_price",
         "query": "//div[contains(@id,'olp-upd-new')]//span[@class='a-color-price']",
         "attr": "alltext"
       },{
         "key": "one_new_seller_shipping_price",
         "query": "//div[contains(@id,'olp-upd-new')]//span[@class='a-color-base']",
         "attr": "alltext"
       },{
         "key": "one_shipping_price",
         "query": "//span[@id='ourprice_shippingmessage']//span[@class='a-size-base a-color-secondary'] | //div[@id='desktop_unifiedPrice']//span[@id='price-shipping-message']//span[@class='a-color-secondary a-size-base']",
         "attr": "alltext"
       }]
    },{
        "id": 13,
        "name": "ListsScrapper",
        "queries": [{
          "key": "detail_images",
          "query": "//li[@class='a-spacing-small item imageThumbnail a-declarative']//img",
          "attr": "src"
        }]
     },{
       "name": "OpenNode",
       "id": 15,
       "label": 5,
       "query": "//li[@class='a-dropdown-item dropdownAvailable'] | //button//span[@class='a-size-base'] | //select[@id='native_dropdown_selected_size_name']//option[position()>1]",
       "ops": [{
         "id": 17,
         "name": "ClickOperator",
         "queries": [{
           "delay": 5,
           "query": "//li[@class='a-dropdown-item dropdownAvailable'][%s] | //li[%s]//button//span[@class='a-size-base'] | //select[@id='native_dropdown_selected_size_name']//option[%s+1]",
           "indices": "-1,-1,-1"
         }]
       },{
         "name": "ValuesScrapper",
         "id": 18,
         "queries": [{
           "key": "size",
           "query": "//div[@id='variation_size_name']//span[@class='selection'] | //span[@id='dropdown_selected_size_name']//span[@class='a-dropdown-prompt']",
           "attr": "alltext"
         },{
           "key": "color",
           "query": "//div[@id='variation_color_name']//span[@class='selection']",
           "attr": "alltext"
         },{
           "key": "price",
           "query": "//span[contains(@id,'priceblock_')] | //div[contains(@id,'olp-upd-new')]//span[@class='a-color-price']",
           "attr": "alltext"
         },{
           "key": "information",
           "query": "//div[@id='productDetails_feature_div']",
           "attr": "alltext"
         },{
           "key": "stock",
           "query": "//select[@id='quantity']/option[last()]",
           "attr": "alltext"
         },{
           "key": "new_seller_price",
           "query": "//div[contains(@id,'olp-upd-new')]//span[@class='a-color-price']",
           "attr": "alltext"
         },{
           "key": "new_seller_shipping_price",
           "query": "//div[contains(@id,'olp-upd-new')]//span[@class='a-color-base']",
           "attr": "alltext"
         },{
           "key": "shipping_price",
           "query": "//span[@id='ourprice_shippingmessage']//span[@class='a-size-base a-color-secondary'] | //div[@id='desktop_unifiedPrice']//span[@id='price-shipping-message']//span[@class='a-color-secondary a-size-base']",
           "attr": "alltext"
        }]
      },{
       "id": 19,
       "name": "DictsScrapper",
       "queries": [{
         "key": "additional_info_dict",
         "rows_query": "//div[contains(@class,'column col2')]//table/tbody/tr",
         "key_query": "./td[1]",
         "key_attr": "alltext",
         "value_query": "./td[2]",
         "value_attr": "alltext"
       }]
     }]
  }]
}]
}

